<!--
  Copyright 2026 John Kost

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ReMixr Extension Builder</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="container">
    <!-- Header -->
    <header>
      <h1>ğŸ¨ ReMixr</h1>
      <p class="tagline">Build Browser Extensions with AI</p>
    </header>

    <!-- Main Navigation Tabs -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="projects">Projects</button>
      <button class="tab-btn" data-tab="builder">Builder</button>
      <button class="tab-btn" data-tab="tools">Tools</button>
      <button class="tab-btn" data-tab="templates">Templates</button>
      <button class="tab-btn" data-tab="analyzer">Analyze</button>
    </div>

    <!-- Projects Tab -->
    <div id="projects-tab" class="tab-content active">
      <div class="section">
        <h2>Your Projects</h2>
        <button id="new-project-btn" class="btn btn-primary">
          + New Extension Project
        </button>
        <div id="projects-list" class="projects-list">
          <p class="empty-state">No projects yet. Create your first extension!</p>
        </div>
      </div>
    </div>

    <!-- Builder Tab -->
    <div id="builder-tab" class="tab-content">
      <div class="section">
        <div class="builder-header">
          <input type="text" id="project-name" placeholder="My Extension" class="project-name-input">
          <div class="builder-actions">
            <button id="save-project-btn" class="btn btn-small">Save</button>
            <button id="preview-btn" class="btn btn-small btn-secondary">ğŸ‘ï¸ Preview</button>
            <button id="test-extension-btn" class="btn btn-small btn-success">Test</button>
            <button id="export-extension-btn" class="btn btn-small btn-primary">Export</button>
          </div>
        </div>

        <!-- AI Generation -->
        <div class="ai-section">
          <h3>ğŸ¤– AI Assistant</h3>
          <textarea id="ai-prompt" placeholder="Describe your extension... 

Examples:
â€¢ Create an extension that highlights all external links
â€¢ Build a timer to track time spent on each site
â€¢ Make a tool that extracts all images from a page
â€¢ Tip: Use the 'Analyze' tab to find selectors!" rows="4"></textarea>
          <button id="generate-btn" class="btn btn-primary">Generate Extension Code</button>
        </div>

        <!-- File Manager -->
        <div class="files-section">
          <h3>ğŸ“ Project Files</h3>
          <div class="file-tree" id="file-tree">
            <div class="file-item active" data-file="manifest.json">ğŸ“„ manifest.json</div>
            <div class="file-item" data-file="popup.html">ğŸ“„ popup.html</div>
            <div class="file-item" data-file="popup.js">ğŸ“„ popup.js</div>
            <div class="file-item" data-file="content.js">ğŸ“„ content.js</div>
            <div class="file-item" data-file="background.js">ğŸ“„ background.js</div>
            <div class="file-item" data-file="styles.css">ğŸ“„ styles.css</div>
          </div>
        </div>

        <!-- Editor & Preview Area -->
        <div class="workspace-area">
          <!-- Code Editor -->
          <div id="editor-container" class="editor-section">
            <div class="editor-header">
              <span id="current-file">manifest.json</span>
            </div>
            <textarea id="code-editor" class="code-editor" rows="15"></textarea>
          </div>

          <!-- Live Preview -->
          <div id="preview-container" class="preview-section" style="display: none;">
            <div class="preview-header">
              <span>Live Preview (popup.html)</span>
              <button id="close-preview" class="btn btn-small">Close</button>
            </div>
            <div class="preview-frame-wrapper">
              <iframe id="preview-frame"></iframe>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Templates Tab -->
    <div id="templates-tab" class="tab-content">
      <div class="section">
        <h2>Extension Templates</h2>
        <div class="templates-grid">
          <div class="template-card" data-template="content-modifier">
            <div class="template-icon">ğŸ¨</div>
            <h3>Content Modifier</h3>
            <p>Change how websites look and behave</p>
            <button class="btn btn-small">Use Template</button>
          </div>
          <div class="template-card" data-template="productivity">
            <div class="template-icon">â±ï¸</div>
            <h3>Productivity Tool</h3>
            <p>Time tracking, blockers, and focus tools</p>
            <button class="btn btn-small">Use Template</button>
          </div>
          <div class="template-card" data-template="data-extractor">
            <div class="template-icon">ğŸ“Š</div>
            <h3>Data Extractor</h3>
            <p>Scrape and export webpage data</p>
            <button class="btn btn-small">Use Template</button>
          </div>
          <div class="template-card" data-template="page-monitor">
            <div class="template-icon">ğŸ‘ï¸</div>
            <h3>Page Monitor</h3>
            <p>Track changes on websites</p>
            <button class="btn btn-small">Use Template</button>
          </div>
          <div class="template-card" data-template="popup-tool">
            <div class="template-icon">ğŸ”§</div>
            <h3>Popup Tool</h3>
            <p>Simple utility with popup interface</p>
            <button class="btn btn-small">Use Template</button>
          </div>
          <div class="template-card" data-template="blank">
            <div class="template-icon">ğŸ“</div>
            <h3>Blank Project</h3>
            <p>Start from scratch</p>
            <button class="btn btn-small">Use Template</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Analyzer Tab -->
    <div id="analyzer-tab" class="tab-content">
      <div class="section">
        <h2>ğŸ” Site Analysis</h2>

        <!-- Interactive Inspector -->
        <div class="analyzer-card highlight-card">
          <div class="card-header">
            <h3>Interactive Inspector</h3>
            <label class="switch">
              <input type="checkbox" id="inspector-toggle">
              <span class="slider round"></span>
            </label>
          </div>
          <p>Hover over elements to see details. Click to copy selector.</p>
        </div>

        <!-- Deep Scan Tools -->
        <h3>Deep Scan</h3>
        <div class="tools-grid">
          <button id="scan-visualize" class="tool-btn">
            <span class="icon">ğŸ•¸ï¸</span>
            <span>Visualize</span>
          </button>
          <button id="scan-structure" class="tool-btn">
            <span class="icon">ğŸ—ï¸</span>
            <span>Structure</span>
          </button>
          <button id="scan-palette" class="tool-btn">
            <span class="icon">ğŸ¨</span>
            <span>Palette</span>
          </button>
          <button id="scan-assets" class="tool-btn">
            <span class="icon">ğŸ“¦</span>
            <span>Assets</span>
          </button>
        </div>

        <!-- Advanced Tools -->
        <h3>Under the Hood</h3>
        <div class="tools-grid">
          <button id="scan-storage" class="tool-btn">
            <span class="icon">ğŸ’¾</span>
            <span>Storage</span>
          </button>
          <button id="scan-workers" class="tool-btn">
            <span class="icon">âš™ï¸</span>
            <span>Workers</span>
          </button>
          <button id="scan-perf" class="tool-btn">
            <span class="icon">âš¡</span>
            <span>Perf & Net</span>
          </button>
          <button id="scan-stack" class="tool-btn">
            <span class="icon">ğŸ§¬</span>
            <span>Stack</span>
          </button>
        </div>

        <!-- Results Area -->
        <div id="analysis-results" class="results-area" style="display: none;">
          <div class="results-header">
            <h3 id="result-title">Results</h3>
            <button id="clear-results" class="btn-text">Clear</button>
          </div>
          <div id="result-content"></div>
          <div id="d3-container"
            style="width: 100%; height: 400px; overflow: hidden; background: #0f172a; border-radius: 8px; display: none;">
          </div>
        </div>
      </div>
    </div>

    <!-- Status Messages -->
    <div id="status" class="status"></div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <!-- D3.js -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <!-- CodeMirror -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/htmlmixed/htmlmixed.min.js"></script>

  <script src="export.js"></script>
  <script src="popup.js"></script>
</body>

</html>