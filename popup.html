<!--
  Copyright 2026 John Kost
  Licensed under the Apache License, Version 2.0
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ReMixr IDE</title>
  <link rel="stylesheet" href="popup.css">
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">
  <!-- CodeMirror -->
  <link rel="stylesheet" href="lib/codemirror/codemirror.min.css">
  <link rel="stylesheet" href="lib/codemirror/theme/dracula.min.css">
</head>

<body>

  <div class="container">
    <!-- Header -->
    <header>
      <div class="header-main">
        <h1>ReMixr IDE</h1>
        <p class="tagline">Meta-Extension Builder</p>
      </div>
      <div class="header-actions-main">
        <button id="theme-toggle" class="theme-toggle-btn" title="Toggle Dark/Light Mode">
          <span class="moon-icon">ğŸŒ™</span>
          <span class="sun-icon">â˜€ï¸</span>
        </button>
      </div>
    </header>

    <!-- Navigation -->
    <nav class="tabs">
      <button class="tab-btn active" data-tab="projects">Projects</button>
      <button class="tab-btn" data-tab="templates">Templates</button>
      <button class="tab-btn" data-tab="code">Code</button>
      <button class="tab-btn" data-tab="ui">UI</button>
      <button class="tab-btn" data-tab="analyzer">Inspector</button>
      <button class="tab-btn" data-tab="tools">Tools</button>
    </nav>

    <!-- CONTENT AREAS -->

    <!-- Projects Tab -->
    <div id="projects-tab" class="tab-content active">
      <div class="section">
        <h2>Your Projects</h2>

        <div id="projects-list" class="projects-list">
          <!-- Populated by JS -->
          <div class="empty-state">No projects found. Start building!</div>
        </div>
      </div>
    </div>

    <!-- Templates Tab -->
    <div id="templates-tab" class="tab-content">
      <div class="section">
        <h2>Quick Templates</h2>
        <div class="templates-grid">
          <div class="template-card" data-template="starter">
            <div class="template-icon">ğŸš€</div>
            <h3>Starter</h3>
            <p>Empty Boilerplate</p>
          </div>
          <div class="template-card" data-template="content-modifier">
            <div class="template-icon">ğŸ¨</div>
            <h3>Modifier</h3>
            <p>Inject CSS/JS</p>
          </div>
          <div class="template-card" data-template="data-extractor">
            <div class="template-icon">ğŸ“Š</div>
            <h3>Scraper</h3>
            <p>Extract Data</p>
          </div>
          <div class="template-card" data-template="productivity">
            <div class="template-icon">â±ï¸</div>
            <h3>Timer</h3>
            <p>Productivity</p>
          </div>
          <div class="template-card" data-template="popup-tool">
            <div class="template-icon">ğŸ”§</div>
            <h3>Utility</h3>
            <p>Popup Tool</p>
          </div>
          <div class="template-card" data-template="tab-manager">
            <div class="template-icon">ğŸ“‘</div>
            <h3>Tab Manager</h3>
            <p>Organize Tabs</p>
          </div>
          <div class="template-card" data-template="bookmark-organizer">
            <div class="template-icon">ğŸ”–</div>
            <h3>Bookmarks</h3>
            <p>Search & Save</p>
          </div>
          <div class="template-card" data-template="form-filler">
            <div class="template-icon">ğŸ“</div>
            <h3>Form Filler</h3>
            <p>Auto-Fill Forms</p>
          </div>
          <div class="template-card" data-template="dark-mode">
            <div class="template-icon">ğŸŒ™</div>
            <h3>Dark Mode</h3>
            <p>Universal Theme</p>
          </div>
          <div class="template-card" data-template="ad-blocker">
            <div class="template-icon">ğŸ›¡ï¸</div>
            <h3>Ad Blocker</h3>
            <p>Block Ads</p>
          </div>
          <div class="template-card" data-template="screenshot-tool">
            <div class="template-icon">ğŸ“¸</div>
            <h3>Screenshot</h3>
            <p>Capture Pages</p>
          </div>
          <div class="template-card" data-template="password-generator">
            <div class="template-icon">ğŸ”</div>
            <h3>Password Gen</h3>
            <p>Secure Passwords</p>
          </div>
          <div class="template-card" data-template="note-taker">
            <div class="template-icon">ğŸ“</div>
            <h3>Quick Notes</h3>
            <p>Take Notes</p>
          </div>
        </div>

        <div class="spacer-32"></div>

        <h2>Extension Wizard</h2>

        <!-- Extension Wizard -->
        <div class="wizard-container">
          <div class="wizard-header">
            <div class="wizard-icon">âœ¨</div>
            <div>
              <h3 class="wizard-title">Scaffold Chrome Extension</h3>
              <p class="wizard-subtitle">Configure features and
                generate your extension structure</p>
            </div>
          </div>

          <div class="wizard-section">
            <label class="wizard-label" for="wizard-name">Extension Name</label>
            <input type="text" id="wizard-name" class="wizard-input" placeholder="My Awesome Extension">
          </div>

          <div class="wizard-section">
            <label class="wizard-label" for="wizard-description">Description</label>
            <input type="text" id="wizard-description" class="wizard-input"
              placeholder="Enhance your browsing experience">
          </div>

          <div class="wizard-section">
            <div class="wizard-label">Extension Type</div>
            <div class="wizard-radio-group">
              <label class="wizard-radio">
                <input type="radio" name="ext-type" value="content-script" checked>
                <span>Content Script (Modify Pages)</span>
              </label>
              <label class="wizard-radio">
                <input type="radio" name="ext-type" value="popup">
                <span>Browser Action (Popup)</span>
              </label>
              <label class="wizard-radio">
                <input type="radio" name="ext-type" value="side-panel">
                <span>Side Panel</span>
              </label>
              <label class="wizard-radio">
                <input type="radio" name="ext-type" value="page-action">
                <span>Page Action (Contextual)</span>
              </label>
            </div>
          </div>

          <div class="wizard-section">
            <div class="wizard-label">Features</div>
            <div class="wizard-checkbox-grid">
              <label class="wizard-checkbox">
                <input type="checkbox" id="feat-background">
                <span>Background Service Worker</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="feat-storage">
                <span>Local Storage</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="feat-tabs">
                <span>Tab Management</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="feat-context-menu">
                <span>Context Menu Items</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="feat-notifications">
                <span>Notifications</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="feat-bookmarks">
                <span>Bookmarks Access</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="feat-history">
                <span>History Access</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="feat-downloads">
                <span>Download Management</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="feat-cookies">
                <span>Cookie Access</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="feat-web-request">
                <span>Network Interception</span>
              </label>
            </div>
          </div>

          <div class="wizard-section">
            <div class="wizard-label">Host Permissions</div>
            <div class="wizard-radio-group">
              <label class="wizard-radio">
                <input type="radio" name="host-perms" value="active-tab" checked>
                <span>Active Tab Only</span>
              </label>
              <label class="wizard-radio">
                <input type="radio" name="host-perms" value="all-urls">
                <span>All Websites</span>
              </label>
              <label class="wizard-radio">
                <input type="radio" name="host-perms" value="custom">
                <span>Custom Domains</span>
              </label>
            </div>
            <input type="text" id="wizard-custom-hosts" class="wizard-input custom-host-input"
              placeholder="https://example.com/*" title="Custom domain patterns" aria-label="Custom host patterns">
          </div>

          <div class="wizard-section">
            <label class="wizard-label" for="wizard-framework">UI Framework (Optional)</label>
            <select id="wizard-framework" class="wizard-select" title="Select UI Framework">
              <option value="vanilla">Vanilla JavaScript</option>
              <option value="react">React</option>
              <option value="vue">Vue</option>
              <option value="svelte">Svelte</option>
            </select>
          </div>

          <div class="wizard-section">
            <div class="wizard-label">Behaviors</div>
            <div class="wizard-checkbox-grid">
              <label class="wizard-checkbox">
                <input type="checkbox" id="behavior-match-site">
                <span>Match Parent Site Style</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="behavior-auto-open">
                <span>Auto-Open Side Panel</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="behavior-persist-state">
                <span>Persist State</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="behavior-keyboard">
                <span>Keyboard Shortcuts</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="behavior-badge">
                <span>Badge Notifications</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="behavior-auto-run">
                <span>Auto-Run on Load</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="behavior-sync">
                <span>Sync Across Devices</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="behavior-theme">
                <span>Theme Support</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="behavior-analytics">
                <span>Usage Analytics</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="behavior-hotreload">
                <span>Hot Reload Dev Mode</span>
              </label>
              <label class="wizard-checkbox">
                <input type="checkbox" id="behavior-error-tracking">
                <span>Error Tracking</span>
              </label>
            </div>
          </div>

          <button id="generate-extension-btn" class="btn btn-primary generate-btn-full">
            Generate Extension
          </button>
        </div>
      </div>
    </div>

    <!-- Code Tab -->
    <div id="code-tab" class="tab-content">
      <div class="vscode-layout">
        <!-- Sidebar -->
        <div class="vscode-sidebar">
          <div class="sidebar-header">
            <span>EXPLORER</span>
            <span class="header-actions">...</span>
          </div>

          <div class="sidebar-content">
            <!-- Project Name -->
            <div class="vscode-section">
              <div class="vscode-section-header">PROJECT</div>
              <div class="vscode-section-content">
                <input type="text" id="project-name" placeholder="Extension Name" class="vscode-input">
              </div>
            </div>

            <!-- File Explorer -->
            <div class="vscode-section">
              <div class="vscode-section-header">FILES</div>
              <div class="vscode-section-content file-tree-padding-0">
                <div class="file-tree" id="file-tree">
                  <!-- Dynamically populated -->
                </div>
              </div>
            </div>

            <!-- Feature Injector -->
            <div class="vscode-section collapsed">
              <div class="vscode-section-header" id="feature-injector-toggle">FEATURE INJECTOR</div>
              <div class="vscode-section-content feature-injector-hidden" id="feature-injector-content">
                <p class="feature-injector-description feature-description">
                  Modify and enhance your project dynamically</p>

                <h4 class="injector-category">Identity & Type</h4>
                <input type="text" id="inject-name" class="vscode-input inject-input-mb4" placeholder="Update Name"
                  title="Update extension name" aria-label="Extension name">
                <input type="text" id="inject-description" class="vscode-input inject-input-mb8"
                  placeholder="Update Description" title="Update extension description"
                  aria-label="Extension description">

                <div class="wizard-radio-group">
                  <label class="wizard-radio"><input type="radio" name="inject-ext-type" value="none" checked><span>Keep
                      Original</span></label>
                  <label class="wizard-radio"><input type="radio" name="inject-ext-type"
                      value="content-script"><span>Content Script</span></label>
                  <label class="wizard-radio"><input type="radio" name="inject-ext-type"
                      value="popup"><span>Popup</span></label>
                  <label class="wizard-radio"><input type="radio" name="inject-ext-type" value="side-panel"><span>Side
                      Panel</span></label>
                  <label class="wizard-radio"><input type="radio" name="inject-ext-type" value="page-action"><span>Page
                      Action</span></label>
                </div>

                <h4 class="injector-category">Core Features</h4>
                <div class="feature-injector-grid">
                  <label class="feature-checkbox"><input type="checkbox" id="inject-storage"><span>ğŸ’¾
                      Storage</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-tabs"><span>ğŸ“‘ Tabs</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-notifications"><span>ğŸ””
                      Notifications</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-context-menu"><span>ğŸ“‹ Context
                      Menu</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-background"><span>âš™ï¸
                      Background</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-bookmarks"><span>ğŸ”–
                      Bookmarks</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-history"><span>ğŸ“œ
                      History</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-downloads"><span>â¬‡ï¸
                      Downloads</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-cookies"><span>ğŸª
                      Cookies</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-web-request"><span>ğŸŒ Web
                      Request</span></label>
                </div>

                <h4 class="injector-category">UI Components</h4>
                <div class="feature-injector-grid">
                  <label class="feature-checkbox"><input type="checkbox" id="inject-side-panel"><span>ğŸ“± Side
                      Panel</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-theme"><span>ğŸŒ“ Theme
                      Toggle</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-keyboard"><span>âŒ¨ï¸
                      Keyboard</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-badge"><span>ğŸ”´ Badge</span></label>
                </div>

                <h4 class="injector-category">Host Permissions</h4>
                <div class="wizard-radio-group">
                  <label class="wizard-radio"><input type="radio" name="inject-host-perms" value="active-tab"
                      checked><span>Active Tab Only</span></label>
                  <label class="wizard-radio"><input type="radio" name="inject-host-perms" value="all-urls"><span>All
                      Websites</span></label>
                  <label class="wizard-radio"><input type="radio" name="inject-host-perms" value="custom"><span>Custom
                      Domains</span></label>
                </div>
                <input type="text" id="inject-custom-hosts" class="vscode-input inject-custom-host"
                  placeholder="https://example.com/*" title="Custom domain patterns" aria-label="Custom host patterns">

                <h4 class="injector-category">UI Framework</h4>
                <select id="inject-framework" class="vscode-input inject-framework-select" title="Select UI Framework">
                  <option value="none">Keep Original</option>
                  <option value="vanilla">Vanilla JS</option>
                  <option value="react">React</option>
                  <option value="vue">Vue</option>
                  <option value="svelte">Svelte</option>
                </select>

                <h4 class="injector-category">Behaviors</h4>
                <div class="feature-injector-grid">
                  <label class="feature-checkbox"><input type="checkbox" id="inject-sync-storage"><span>â˜ï¸ Sync
                      Store</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-auto-open"><span>ğŸš€
                      Auto-Open</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-persist-state"><span>ğŸ’¿
                      Persist</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-match-site"><span>ğŸ¨ Match
                      Site</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-auto-run"><span>âš¡
                      Auto-Run</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-analytics"><span>ğŸ“Š
                      Analytics</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-hot-reload"><span>ğŸ”¥ Hot
                      Reload</span></label>
                  <label class="feature-checkbox"><input type="checkbox" id="inject-error-tracking"><span>ğŸ›
                      Errors</span></label>
                </div>

                <button id="inject-features-btn" class="vscode-btn primary inject-btn-full">âš¡
                  Inject Features</button>
              </div>
            </div>
          </div>

          <div class="sidebar-footer">
            <button id="save-project-btn" class="vscode-btn">ğŸ’¾ Save Project</button>
            <button id="test-extension-btn" class="vscode-btn primary">ğŸš€ Load Extension</button>
            <div class="footer-btn-group">
              <button id="export-extension-btn" class="vscode-btn footer-btn-flex">ğŸ“¦ ZIP</button>
              <button id="preview-btn" class="vscode-btn footer-btn-flex">ğŸ‘ï¸ Preview</button>
            </div>
          </div>
        </div>

        <!-- Main Editor Area -->
        <div class="vscode-main">
          <div class="editor-tabs">
            <div class="editor-tab active">
              <span id="current-file">manifest.json</span>
            </div>
          </div>

          <div class="editor-section">
            <textarea id="code-editor" title="Code Editor" aria-label="Source code editor"></textarea>
          </div>


          <!-- Preview Modal -->
          <div id="preview-container" class="preview-container-hidden">
            <div class="preview-header">
              <h3 class="preview-title">PREVIEW</h3>
              <button id="close-preview" class="btn btn-secondary btn-small">Close</button>
            </div>
            <div class="preview-iframe-wrapper">
              <iframe id="preview-frame" class="preview-iframe" title="Extension Preview"></iframe>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- UI Tab -->
    <div id="ui-tab" class="tab-content">
      <div class="shiny-container">
        <!-- Sidebar - Chat & Context -->
        <div class="shiny-sidebar">
          <div class="shiny-sidebar-header">
            <h3>Visual Designer</h3>
            <div class="ai-status">
              <span class="status-dot"></span> Online
            </div>
          </div>
          <div class="shiny-chat-history" id="shiny-chat-history">
            <div class="chat-message ai">
              <div class="chat-icon">âœ¨</div>
              <div class="chat-bubble">
                Hello! I'm your Visual Design Assistant. Describe the UI you want to build, and I'll generate it in the
                canvas.
                <br><br>
                Try: <em>"A sleek dark-mode dashboard with a sidebar and a task list."</em>
              </div>
            </div>
          </div>
          <div class="shiny-input-area">
            <div class="input-wrapper">
              <textarea id="shiny-prompt" placeholder="Message Visual AI..."></textarea>
              <button id="shiny-generate-btn" title="Generate UI">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="white">
                  <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Main - Canvas & Properties -->
        <div class="shiny-main">
          <div class="shiny-toolbar">
            <div class="toolbar-left">
              <div class="view-toggles">
                <button class="view-btn active" data-view="desktop" title="Desktop View">ğŸ–¥ï¸</button>
                <button class="view-btn" data-view="mobile" title="Mobile View">ğŸ“±</button>
              </div>
            </div>
            <div class="toolbar-center">
              <span id="shiny-project-title">shiny_project_1</span>
            </div>
            <div class="toolbar-right">
              <button id="shiny-code-toggle" class="btn btn-small btn-secondary">Code</button>
              <button id="shiny-publish-btn" class="btn btn-small btn-primary">Publish</button>
            </div>
          </div>

          <div class="shiny-canvas-area">
            <div id="canvas-wrapper" class="canvas-wrapper desktop">
              <div class="canvas-chrome">
                <div class="chrome-dots"><span></span><span></span><span></span></div>
                <div class="chrome-address">re-mixr://preview</div>
              </div>
              <div class="iframe-container">
                <iframe id="shiny-preview-frame" title="UI Preview Canvas"></iframe>
                <div id="canvas-overlay" class="canvas-overlay">
                  <div class="loader-container canvas-loader-hidden">
                    <div class="shiny-loader"></div>
                    <p>Brewing your UI...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="shiny-quick-controls">
            <div class="control-group">
              <div class="control-label">Theme</div>
              <div class="swatch-group">
                <button class="swatch dark active" data-theme="dark" title="Dark Mode"></button>
                <button class="swatch light" data-theme="light" title="Light Mode"></button>
                <button class="swatch glass" data-theme="glass" title="Glassmorphism"></button>
              </div>
            </div>
            <div class="control-divider"></div>
            <div class="control-group">
              <div class="control-label">Accent</div>
              <div class="accent-wrapper">
                <input type="color" id="shiny-accent-picker" value="#6366f1" title="Accent color picker"
                  aria-label="Accent color">
              </div>
            </div>
            <div class="control-divider"></div>
            <div class="control-group">
              <button id="shiny-magic-polish" class="btn btn-small btn-secondary">ğŸª„ Polish</button>
              <button id="shiny-undo" class="btn btn-small btn-secondary" title="Undo">â†©ï¸</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Analyzer/Inspector Tab - PROFESSIONAL REDESIGN -->
    <div id="analyzer-tab" class="tab-content">
      <div class="section inspector-workspace">

        <!-- Compact Mining Toolbar (Pinned to Top) -->
        <div class="inspector-toolbar">
          <div class="toolbar-switcher">
            <button class="switcher-btn active" data-cluster="actions">Actions</button>
            <button class="switcher-btn" data-cluster="architecture">Arch</button>
            <button class="switcher-btn" data-cluster="design">Design</button>
            <button class="switcher-btn" data-cluster="tech">Tech</button>
            <button class="switcher-btn" data-cluster="data">Data</button>
            <button class="switcher-btn" data-cluster="quality">Qual</button>
            <button class="switcher-btn" data-cluster="psychology">Psych</button>
          </div>
          <div class="toolbar-tray">
            <!-- Actions Cluster -->
            <div class="toolbar-cluster active" id="cluster-actions">
              <button id="run-omniscience-btn" class="icon-only-btn" title="Complete Extraction">ğŸ’</button>
              <button id="btn-extract-context" class="icon-only-btn" title="Transform Code">ğŸ”®</button>
              <div class="icon-only-btn-toggle" title="Element Miner">
                <input type="checkbox" id="inspector-toggle" class="toolbar-checkbox">
                <label for="inspector-toggle" class="toolbar-checkbox-label">ğŸ¯</label>
              </div>
            </div>

            <!-- Architecture Cluster -->
            <div class="toolbar-cluster" id="cluster-architecture">
              <button id="scan-structure" class="icon-only-btn" title="Structure Analysis">ğŸ—ï¸</button>
              <button id="scan-visualize" class="icon-only-btn" title="DOM Map Visualization">ğŸ—ºï¸</button>
              <button id="scan-sequence" class="icon-only-btn" title="Flow & Sequence Analysis">ğŸŒŠ</button>
              <button id="scan-code" class="icon-only-btn" title="Code Review">ğŸ’»</button>
            </div>

            <!-- Design Cluster -->
            <div class="toolbar-cluster" id="cluster-design">
              <button id="scan-palette" class="icon-only-btn" title="Color Palette Extraction">ğŸ¨</button>
              <button id="scan-fonts" class="icon-only-btn" title="Typography & Fonts">ğŸ…°ï¸</button>
              <button id="scan-emotion" class="icon-only-btn" title="Emotional Impact Analysis">ğŸ˜Š</button>
            </div>

            <!-- Tech Stack Cluster -->
            <div class="toolbar-cluster" id="cluster-tech">
              <button id="scan-assets" class="icon-only-btn" title="Asset Inventory">ğŸ“¦</button>
              <button id="scan-net" class="icon-only-btn" title="API & Network Sniffer">ğŸ”Œ</button>
              <button id="scan-perf" class="icon-only-btn premium" title="Performance Audit">âš¡</button>
              <button id="scan-stack" class="icon-only-btn" title="Technology Stack Detection">ğŸ› ï¸</button>
            </div>

            <!-- Data Cluster -->
            <div class="toolbar-cluster" id="cluster-data">
              <button id="scan-storage" class="icon-only-btn" title="Storage & Cache Explorer">ğŸ’¾</button>
              <button id="scan-workers" class="icon-only-btn" title="Service Workers & Threads">ğŸ‘·</button>
            </div>

            <!-- Quality Cluster -->
            <div class="toolbar-cluster" id="cluster-quality">
              <button id="scan-a11y" class="icon-only-btn" title="Accessibility Audit">â™¿</button>
              <button id="scan-seo" class="icon-only-btn" title="SEO Optimization Check">ğŸ”</button>
            </div>

            <!-- Psychology Cluster -->
            <div class="toolbar-cluster" id="cluster-psychology">
              <button id="scan-strategy" class="icon-only-btn premium" title="Conversion Strategy">ğŸ“ˆ</button>
              <button id="scan-psyche" class="icon-only-btn premium" title="Psychological Profiling">ğŸ§ </button>
              <button id="scan-rhetoric" class="icon-only-btn premium" title="Rhetorical Copy Analysis">ğŸ“</button>
              <button id="scan-archetype" class="icon-only-btn premium" title="Brand Archetype">ğŸ­</button>
              <button id="scan-soul" class="icon-only-btn premium" title="Trust & Authority">ğŸ›¡ï¸</button>
              <button id="scan-shadow" class="icon-only-btn premium" title="Dark Pattern Detection">ğŸŒ‘</button>
            </div>
          </div>
        </div>

        <!-- Results Display -->
        <div id="analysis-results" class="results-display">
          <div class="results-header-inline">
            <h3 id="result-title" class="result-title-inline">Results</h3>
            <div class="results-actions-inline">
              <button id="fullscreen-toggle" class="btn-icon-inline" title="Toggle fullscreen">â›¶</button>
              <button id="clear-results" class="btn-text-inline" title="Clear results">Clear</button>
            </div>
          </div>
          <div id="result-content" class="results-content">
            <div class="empty-state">
              Click any mining tool below to extract insights
            </div>
          </div>
          <div id="d3-container" class="d3-container d3-container-hidden"></div>
        </div>



        <!-- Element Inspector Panel -->
        <div id="inspector-panel" class="inspector-panel inspector-panel-hidden">
          <div class="panel-header">
            <span id="inspector-element-tag">DIV</span>
            <code id="inspector-element-selector">body > div.main</code>
            <button id="close-inspector-panel" class="close-btn">Ã—</button>
          </div>
          <div class="panel-content">
            <div class="style-group">
              <div class="style-group-label">Layout</div>
              <div class="style-row">
                <span>Display</span>
                <select data-prop="display" class="style-select">
                  <option value="block">block</option>
                  <option value="flex">flex</option>
                  <option value="grid">grid</option>
                  <option value="inline-block">inline-block</option>
                  <option value="none">none</option>
                </select>
              </div>
              <div class="style-row">
                <span>Width</span>
                <input type="text" data-prop="width" class="style-input">
              </div>
              <div class="style-row">
                <span>Height</span>
                <input type="text" data-prop="height" class="style-input">
              </div>
            </div>

            <div class="style-group">
              <div class="style-group-label">Appearance</div>
              <div class="style-row">
                <span>Background</span>
                <input type="color" data-prop="backgroundColor" class="style-color">
              </div>
              <div class="style-row">
                <span>Color</span>
                <input type="color" data-prop="color" class="style-color">
              </div>
              <div class="style-row">
                <span>Opacity</span>
                <input type="range" data-prop="opacity" min="0" max="1" step="0.1" class="style-range">
              </div>
              <div class="style-row">
                <span>B-Radius</span>
                <input type="text" data-prop="borderRadius" class="style-input">
              </div>
            </div>

            <div class="style-group">
              <div class="style-group-label">Typography</div>
              <div class="style-row">
                <span>Font Size</span>
                <input type="text" data-prop="fontSize" class="style-input">
              </div>
              <div class="style-row">
                <span>Weight</span>
                <select data-prop="fontWeight" class="style-select">
                  <option value="normal">Normal</option>
                  <option value="bold">Bold</option>
                  <option value="300">Light</option>
                  <option value="500">Medium</option>
                  <option value="700">Bold+</option>
                </select>
              </div>
            </div>

            <div class="style-group">
              <div class="style-group-label">Spacing</div>
              <div class="style-row">
                <span>Padding</span>
                <input type="text" data-prop="padding" class="style-input">
              </div>
              <div class="style-row">
                <span>Margin</span>
                <input type="text" data-prop="margin" class="style-input">
              </div>
            </div>

            <div class="style-group">
              <div class="style-group-label">Shadow</div>
              <div class="style-row full">
                <input type="text" data-prop="boxShadow" class="style-input" placeholder="box-shadow value">
              </div>
            </div>

            <div class="style-group">
              <div class="style-group-label">System Variables</div>
              <div id="inspector-variables-list" class="variables-list">
                <div class="inspector-variables-empty">Select an element to view CSS variables</div>
              </div>
            </div>
          </div>
          <div class="panel-footer">
            <button id="copy-css-btn" class="btn btn-small btn-secondary">Copy CSS</button>
            <button id="zap-element-btn" class="btn btn-small btn-danger">Zap</button>
          </div>
        </div>

      </div>
    </div>


    <!-- Tools Tab -->
    <div id="tools-tab" class="tab-content">
      <div class="toolbar-container">

        <!-- Group 1: Visual Forensics -->
        <div class="toolbar-group">
          <div class="toolbar-label">Visual Forensics</div>
          <div class="toolbar-row">
            <button id="tool-xray" class="tool-btn highlight" title="Explode DOM in 3D layers">
              <span class="icon">ğŸ§Š</span> <span class="tool-btn-label">X-Ray</span>
            </button>
            <button id="tool-heatmap" class="tool-btn highlight" title="Visualize visual weight and focus">
              <span class="icon">ğŸ”¥</span> <span class="tool-btn-label">Heatmap</span>
            </button>
            <button id="tool-contrast" class="tool-btn" title="Highlight low contrast elements">
              <span class="icon">ğŸŒ“</span> <span class="tool-btn-label">Contrast</span>
            </button>
            <button id="tool-wireframe" class="tool-btn" title="Toggle wireframe mode">
              <span class="icon">ğŸ–¼ï¸</span> <span class="tool-btn-label">Wire</span>
            </button>
            <button id="tool-images" class="tool-btn" title="Toggle image visibility">
              <span class="icon">ğŸ‘ï¸</span> <span class="tool-btn-label">Images</span>
            </button>
            <button id="tool-specimen" class="tool-btn" title="Generate Brand Style Guide">
              <span class="icon">ğŸ“‹</span> <span class="tool-btn-label">Specimen</span>
            </button>
            <button id="tool-gravity" class="tool-btn highlight" title="Make elements fall with physics">
              <span class="icon">ğŸŒŒ</span> <span class="tool-btn-label">Gravity</span>
            </button>
            <button id="tool-neural" class="tool-btn highlight" title="Visualize logical connections">
              <span class="icon">ğŸ§ </span> <span class="tool-btn-label">Neural</span>
            </button>
            <button id="tool-ghost" class="tool-btn" title="Visualize recent interactions">
              <span class="icon">ğŸ‘»</span> <span class="tool-btn-label">Ghost</span>
            </button>
          </div>
        </div>

        <!-- Group 2: Interaction & Modification -->
        <div class="toolbar-group">
          <div class="toolbar-label">Interaction & Modification</div>
          <div class="toolbar-row">
            <button id="tool-god-mode" class="tool-btn super-highlight" title="Toggle Universal Edit Mode">
              <span class="icon">âš¡</span> <span class="tool-btn-label">God Mode</span>
            </button>
            <button id="tool-edit" class="tool-btn" title="Toggle universal edit mode">
              <span class="icon">âœï¸</span> <span class="tool-btn-label">Edit</span>
            </button>
            <button id="tool-zap" class="tool-btn" title="Remove element from DOM">
              <span class="icon">âš¡</span> <span class="tool-btn-label">Zap</span>
            </button>
            <button id="tool-enable" class="tool-btn" title="Enable disabled inputs">
              <span class="icon">ğŸ”“</span> <span class="tool-btn-label">Inputs</span>
            </button>
            <button id="tool-unmask" class="tool-btn" title="Show password fields">
              <span class="icon">ğŸ”‘</span> <span class="tool-btn-label">Unmask</span>
            </button>
            <button id="tool-kill-sticky" class="tool-btn" title="Remove sticky elements">
              <span class="icon">ğŸ©¹</span> <span class="tool-btn-label">Stickies</span>
            </button>
          </div>
        </div>

        <!-- Group 3: Data & Utility -->
        <div class="toolbar-group">
          <div class="toolbar-label">Data & Utility</div>
          <div class="toolbar-row">
            <button id="tool-sniffer" class="tool-btn" title="Live event sniffer">
              <span class="icon">ğŸ•</span> <span class="tool-btn-label">Sniffer</span>
            </button>
            <button id="tool-console" class="tool-btn" title="Inject console">
              <span class="icon">ğŸ’»</span> <span class="tool-btn-label">Console</span>
            </button>
            <button id="tool-pii" class="tool-btn" title="Scan for emails">
              <span class="icon">ğŸ“§</span> <span class="tool-btn-label">Emails</span>
            </button>
            <button id="tool-export-links" class="tool-btn" title="Extract links">
              <span class="icon">ğŸ”—</span> <span class="tool-btn-label">Links</span>
            </button>
            <button id="tool-export-colors" class="tool-btn" title="Extract colors">
              <span class="icon">ğŸ¨</span> <span class="tool-btn-label">Colors</span>
            </button>
            <button id="tool-screenshot" class="tool-btn" title="Take screenshot">
              <span class="icon">ğŸ“¸</span> <span class="tool-btn-label">Shot</span>
            </button>
          </div>
        </div>

        <!-- Group 4: Reality Distortion -->
        <div class="toolbar-group reality-group">
          <div class="toolbar-label">Reality Distortion Engine</div>
          <div class="toolbar-row">
            <button id="warp-cyberdeck" class="tool-btn warp-btn" title="Apply Cyberdeck Theme">
              <span class="icon">ğŸ’¾</span> <span class="tool-btn-label">Cyber</span>
            </button>
            <button id="warp-blueprint" class="tool-btn warp-btn" title="Apply Blueprint Theme">
              <span class="icon">ğŸ“</span> <span class="tool-btn-label">Print</span>
            </button>
            <button id="warp-brutalist" class="tool-btn warp-btn" title="Apply Brutalist Theme">
              <span class="icon">ğŸ•‹</span> <span class="tool-btn-label">Brutal</span>
            </button>
            <button id="warp-vaporwave" class="tool-btn warp-btn" title="Apply Vaporwave Theme">
              <span class="icon">ğŸ—¿</span> <span class="tool-btn-label">Vapor</span>
            </button>
            <button id="warp-glitch" class="tool-btn warp-btn" title="Apply Glitch Theme">
              <span class="icon">ğŸ‘¾</span> <span class="tool-btn-label">Glitch</span>
            </button>
            <button id="warp-reset" class="tool-btn warp-btn" title="Reset Reality">
              <span class="icon">â†©ï¸</span> <span class="tool-btn-label">Reset</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Status Bar & Toast moved inside container -->
    <div id="status" class="status"></div>
  </div>




  <!-- Scripts -->
  <script src="lib/d3.v7.min.js"></script>
  <script src="lib/jszip.min.js"></script>
  <!-- CodeMirror -->
  <script src="lib/codemirror/codemirror.min.js"></script>
  <script src="lib/codemirror/mode/javascript.min.js"></script>
  <script src="lib/codemirror/mode/css.min.js"></script>
  <script src="lib/codemirror/mode/xml.min.js"></script>
  <script src="lib/codemirror/mode/htmlmixed.min.js"></script>

  <script src="lib/templates.js"></script>
  <script src="utils.js"></script>
  <script src="popup.js"></script>
  <script src="export.js"></script>
</body>

</html>